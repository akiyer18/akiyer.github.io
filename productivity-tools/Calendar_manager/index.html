<!DOCTYPE html><html><head><title>📅 Calendar & Event Manager</title><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><style>*{margin:0;padding:0;box-sizing:border-box}:root{--primary:#8B7CF6;--secondary:#06B6D4;--accent:#EC4899;--success:#10B981;--warning:#F59E0B;--error:#EF4444;--background:#FAFBFE;--surface:#FFFFFF;--text-primary:#1E293B;--text-secondary:#64748B;--border:#E2E8F0;--shadow:0 4px 20px rgba(0,0,0,0.08)}body{font-family:"Inter",sans-serif;background:var(--background);color:var(--text-primary);line-height:1.6}.container{max-width:1400px;margin:0 auto;padding:2rem}.header{text-align:center;margin-bottom:3rem}.header h1{font-size:2.5rem;font-weight:700;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:1rem}.back-link{display:inline-flex;align-items:center;gap:0.5rem;color:var(--primary);text-decoration:none;margin-bottom:2rem;font-weight:500}.back-link:hover{color:var(--secondary)}.nav-tabs{display:flex;justify-content:center;gap:1rem;margin-bottom:2rem;flex-wrap:wrap}.nav-tab{padding:0.75rem 1.5rem;background:white;border:2px solid var(--border);border-radius:0.75rem;cursor:pointer;transition:all 0.3s ease;font-weight:500;text-decoration:none;color:var(--text-primary)}.nav-tab.active{background:linear-gradient(135deg,var(--primary),var(--secondary));color:white;border-color:transparent}.nav-tab:hover{transform:translateY(-2px);box-shadow:var(--shadow)}.tab-content{display:none}.tab-content.active{display:block}.card{background:white;border-radius:1rem;padding:2rem;box-shadow:var(--shadow);margin-bottom:2rem;border:1px solid var(--border)}.view-controls{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.view-buttons{display:flex;gap:0.5rem}.view-btn{padding:0.5rem 1rem;background:white;border:2px solid var(--border);border-radius:0.5rem;cursor:pointer;transition:all 0.3s ease;font-weight:500}.view-btn.active{background:var(--primary);color:white;border-color:var(--primary)}.calendar-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.calendar-nav{display:flex;align-items:center;gap:1rem}.nav-btn{padding:0.5rem;background:white;border:2px solid var(--border);border-radius:0.5rem;cursor:pointer;transition:all 0.3s ease}.nav-btn:hover{background:var(--primary);color:white;border-color:var(--primary)}.month-year{font-size:1.5rem;font-weight:600;color:var(--primary)}.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:1px;background:var(--border);border-radius:0.5rem;overflow:hidden}.calendar-cell{background:white;min-height:120px;padding:0.5rem;position:relative;transition:all 0.3s ease}.calendar-cell:hover{background:#F8FAFC}.calendar-cell.other-month{opacity:0.5}.calendar-cell.today{background:linear-gradient(135deg,rgba(139,124,246,0.1),rgba(6,182,212,0.1))}.day-number{font-weight:600;margin-bottom:0.5rem}.event-item{background:var(--surface);border-radius:0.25rem;padding:0.25rem 0.5rem;margin-bottom:0.25rem;font-size:0.8rem;cursor:pointer;transition:all 0.3s ease;border-left:3px solid var(--primary)}.event-item:hover{transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,0.1)}.quick-add{position:fixed;bottom:2rem;right:2rem;width:60px;height:60px;background:linear-gradient(135deg,var(--primary),var(--secondary));color:white;border:none;border-radius:50%;font-size:1.5rem;cursor:pointer;box-shadow:0 4px 20px rgba(139,124,246,0.4);transition:all 0.3s ease}.quick-add:hover{transform:translateY(-2px);box-shadow:0 6px 25px rgba(139,124,246,0.6)}.form-control{width:100%;padding:0.75rem 1rem;border:2px solid var(--border);border-radius:0.5rem;font-size:1rem;transition:all 0.3s ease;margin-bottom:1rem}.form-control:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(139,124,246,0.1)}.form-group{margin-bottom:1.5rem}.form-group label{display:block;margin-bottom:0.5rem;font-weight:500}.btn{display:inline-flex;align-items:center;gap:0.5rem;padding:0.75rem 1.5rem;background:linear-gradient(135deg,var(--primary),var(--secondary));color:white;border:none;border-radius:0.5rem;font-weight:500;cursor:pointer;transition:all 0.3s ease;text-decoration:none}.btn:hover{transform:translateY(-2px);box-shadow:0 4px 15px rgba(139,124,246,0.4)}.btn-secondary{background:transparent;color:var(--primary);border:2px solid var(--primary)}.btn-secondary:hover{background:var(--primary);color:white}.tag-selector{display:flex;flex-wrap:wrap;gap:0.5rem;margin:1rem 0}.tag-item{padding:0.5rem 1rem;border-radius:2rem;cursor:pointer;transition:all 0.3s ease;border:2px solid transparent;font-size:0.9rem;font-weight:500}.tag-item.selected{border-color:white;box-shadow:0 0 0 2px var(--primary)}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:none;justify-content:center;align-items:center;z-index:1000}.modal.active{display:flex}.modal-content{background:white;border-radius:1rem;padding:2rem;max-width:500px;width:90%;max-height:90vh;overflow-y:auto}.command-palette{position:fixed;top:10%;left:50%;transform:translateX(-50%);width:90%;max-width:600px;background:white;border-radius:1rem;box-shadow:0 20px 60px rgba(0,0,0,0.3);z-index:2000;display:none}.command-palette.active{display:block}.command-input{width:100%;padding:1rem;border:none;font-size:1.1rem;outline:none;border-bottom:1px solid var(--border)}.command-results{max-height:300px;overflow-y:auto}.command-item{padding:1rem;cursor:pointer;border-bottom:1px solid var(--border);transition:all 0.3s ease}.command-item:hover,.command-item.selected{background:var(--background)}.toast{position:fixed;top:20px;right:20px;padding:1rem 1.5rem;border-radius:0.5rem;color:white;font-weight:500;z-index:1000;animation:slideIn 0.3s ease}@keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes slideOut{from{transform:translateX(0);opacity:1}to{transform:translateX(100%);opacity:0}}@media (max-width:768px){.container{padding:1rem}.calendar-grid{grid-template-columns:1fr}.calendar-cell{min-height:80px}.view-controls{flex-direction:column;align-items:stretch}.view-buttons{justify-content:center}}</style></head><body><div class="container"><a href="../" class="back-link"><i class="fas fa-arrow-left"></i> Back to Tools</a><div class="header"><h1><i class="fas fa-calendar-alt"></i> Calendar & Event Manager</h1><p>Smart event planning with recurring events, tags, and intelligent scheduling</p></div><div class="nav-tabs"><a href="#" class="nav-tab active" onclick="showTab(event,'calendar')"><i class="fas fa-calendar"></i> Calendar</a><a href="#" class="nav-tab" onclick="showTab(event,'events')"><i class="fas fa-list"></i> Events</a><a href="#" class="nav-tab" onclick="showTab(event,'todo')"><i class="fas fa-tasks"></i> To-Do</a><a href="#" class="nav-tab" onclick="showTab(event,'trips')"><i class="fas fa-plane"></i> Trips</a></div><div id="calendar" class="tab-content active"><div class="view-controls"><div class="view-buttons"><button class="view-btn active" data-view="month" onclick="changeView('month')">Month</button><button class="view-btn" data-view="week" onclick="changeView('week')">Week</button><button class="view-btn" data-view="day" onclick="changeView('day')">Day</button></div><div><button class="btn btn-secondary" onclick="toggleCommandPalette()"><i class="fas fa-search"></i> Quick Search (Ctrl+K)</button></div></div><div class="calendar-header"><div class="calendar-nav"><button class="nav-btn" onclick="previousPeriod()"><i class="fas fa-chevron-left"></i></button><div class="month-year" id="current-period">December 2024</div><button class="nav-btn" onclick="nextPeriod()"><i class="fas fa-chevron-right"></i></button></div><button class="btn" onclick="goToToday()"><i class="fas fa-calendar-day"></i> Today</button></div><div class="calendar-grid" id="calendar-grid"></div></div><div id="events" class="tab-content"><div class="card"><h2><i class="fas fa-plus"></i> Add New Event</h2><form onsubmit="addEvent(event)"><div class="form-group"><label>Event Title:</label><input type="text" id="event-title" class="form-control" required></div><div class="form-group"><label>Description:</label><textarea id="event-description" class="form-control" rows="3"></textarea></div><div class="form-group"><label>Start Date & Time:</label><input type="datetime-local" id="event-start" class="form-control" required></div><div class="form-group"><label>End Date & Time:</label><input type="datetime-local" id="event-end" class="form-control" required></div><div class="form-group"><label>Event Type:</label><select id="event-type" class="form-control" onchange="toggleRecurrence()"><option value="one-time">One-time Event</option><option value="recurring">Recurring Event</option></select></div><div id="recurrence-options" style="display:none"><div class="form-group"><label>Recurrence Pattern:</label><select id="recurrence-rule" class="form-control"><option value="daily">Daily</option><option value="weekly">Weekly</option><option value="monthly">Monthly</option><option value="yearly">Yearly</option></select></div></div><div class="form-group"><label>Tags:</label><div class="tag-selector" id="tag-selector"></div><input type="text" id="custom-tag" class="form-control" placeholder="Add custom tag..."></div><button type="submit" class="btn"><i class="fas fa-save"></i> Save Event</button></form></div><div class="card"><h2><i class="fas fa-filter"></i> Filter Events</h2><div class="tag-selector" id="filter-tags"></div></div><div id="events-list"></div></div><div id="todo" class="tab-content"><div class="card"><h2><i class="fas fa-tasks"></i> Smart To-Do Integration</h2><p>Link tasks with calendar events and deadlines</p><div class="form-group"><label>Task Title:</label><input type="text" id="todo-title" class="form-control"></div><div class="form-group"><label>Due Date (Optional):</label><input type="datetime-local" id="todo-due" class="form-control"></div><div class="form-group"><label>Link to Event (Optional):</label><select id="todo-event" class="form-control"><option value="">No linked event</option></select></div><div class="form-group"><label>Priority:</label><select id="todo-priority" class="form-control"><option value="low">Low</option><option value="medium">Medium</option><option value="high">High</option></select></div><button class="btn" onclick="addTodo()"><i class="fas fa-plus"></i> Add Task</button></div><div id="todo-list"></div></div><div id="trips" class="tab-content"><div class="card"><h2><i class="fas fa-plane"></i> Trip Planning</h2><p>Comprehensive travel planning with automatic calendar blocking</p><div class="form-group"><label>Trip Title:</label><input type="text" id="trip-title" class="form-control"></div><div class="form-group"><label>Destination:</label><input type="text" id="trip-destination" class="form-control"></div><div class="form-group"><label>Start Date:</label><input type="date" id="trip-start" class="form-control"></div><div class="form-group"><label>End Date:</label><input type="date" id="trip-end" class="form-control"></div><button class="btn" onclick="createTrip()"><i class="fas fa-plus"></i> Create Trip</button></div><div id="trips-list"></div></div></div><div class="modal" id="event-modal"><div class="modal-content"><h2 id="modal-title">Event Details</h2><div id="modal-body"></div><div style="margin-top:2rem;display:flex;gap:1rem"><button class="btn" onclick="editEvent()"><i class="fas fa-edit"></i> Edit</button><button class="btn" style="background:#EF4444" onclick="deleteEvent()"><i class="fas fa-trash"></i> Delete</button><button class="btn btn-secondary" onclick="closeModal()">Close</button></div></div></div><div class="command-palette" id="command-palette"><input type="text" class="command-input" id="command-input" placeholder="Search events, add quick event, or jump to date..."><div class="command-results" id="command-results"></div></div><button class="quick-add" onclick="quickAddEvent()" title="Quick Add Event"><i class="fas fa-plus"></i></button>
<script>const tagColors={University:"#4F46E5",Work:"#16A34A",Chores:"#F59E0B",Social:"#EC4899",Health:"#10B981",Appointments:"#EF4444",Trips:"#06B6D4",Projects:"#8B7CF6",Learning:"#F97316",Reminders:"#84CC16",Entertainment:"#A855F7",Deadlines:"#DC2626",Finance:"#059669"};class EventManager{constructor(){this.events=[];this.todos=[];this.trips=[];this.currentView="month";this.currentDate=new Date;this.selectedEventId=null;this.commandPaletteActive=false;this.filterTags=[];this.init()}init(){this.loadData();this.setupEventListeners();this.renderCalendar();this.renderTagSelectors();this.renderEventsList();this.renderTodoList();this.renderTripsList();this.updateTodoEventOptions()}loadData(){const savedEvents=localStorage.getItem("calendarEvents");this.events=savedEvents?JSON.parse(savedEvents):[];const savedTodos=localStorage.getItem("calendarTodos");this.todos=savedTodos?JSON.parse(savedTodos):[];const savedTrips=localStorage.getItem("calendarTrips");this.trips=savedTrips?JSON.parse(savedTrips):[]}saveData(){localStorage.setItem("calendarEvents",JSON.stringify(this.events));localStorage.setItem("calendarTodos",JSON.stringify(this.todos));localStorage.setItem("calendarTrips",JSON.stringify(this.trips))}setupEventListeners(){document.addEventListener("keydown",e=>{if((e.ctrlKey||e.metaKey)&&e.key==="k"){e.preventDefault();this.toggleCommandPalette()}});document.getElementById("command-input").addEventListener("input",e=>{this.handleCommandInput(e.target.value)});document.getElementById("command-input").addEventListener("keydown",e=>{if(e.key==="Escape"){this.toggleCommandPalette()}})}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}addEvent(formEvent){formEvent.preventDefault();const title=document.getElementById("event-title").value.trim();const description=document.getElementById("event-description").value.trim();const startTime=new Date(document.getElementById("event-start").value);const endTime=new Date(document.getElementById("event-end").value);const isRecurring=document.getElementById("event-type").value==="recurring";const recurrenceRule=isRecurring?document.getElementById("recurrence-rule").value:"";const selectedTags=Array.from(document.querySelectorAll("#tag-selector .tag-item.selected")).map(item=>item.textContent);const customTag=document.getElementById("custom-tag").value.trim();if(customTag&&!selectedTags.includes(customTag)){selectedTags.push(customTag)}if(!title||!startTime||!endTime){this.showMessage("Please fill in all required fields","error");return}if(endTime<=startTime){this.showMessage("End time must be after start time","error");return}const newEvent={id:this.generateId(),title,description,startTime:startTime.toISOString(),endTime:endTime.toISOString(),isRecurring,recurrenceRule,tags:selectedTags,colorCode:this.getEventColor(selectedTags),createdAt:new Date().toISOString()};this.events.push(newEvent);this.saveData();this.renderCalendar();this.renderEventsList();this.updateTodoEventOptions();formEvent.target.reset();document.querySelectorAll("#tag-selector .tag-item").forEach(item=>item.classList.remove("selected"));this.showMessage("Event added successfully!","success");if(isRecurring){this.checkForRecurringSuggestions(title,selectedTags)}}getEventColor(tags){if(tags.length===0)return tagColors.Other||"#64748B";return tagColors[tags[0]]||"#64748B"}renderCalendar(){const grid=document.getElementById("calendar-grid");const periodElement=document.getElementById("current-period");if(!grid||!periodElement)return;if(this.currentView==="month"){this.renderMonthView(grid,periodElement)}else if(this.currentView==="week"){this.renderWeekView(grid,periodElement)}else{this.renderDayView(grid,periodElement)}}renderMonthView(grid,periodElement){const year=this.currentDate.getFullYear();const month=this.currentDate.getMonth();const firstDay=new Date(year,month,1);const lastDay=new Date(year,month+1,0);const startDate=new Date(firstDay);startDate.setDate(startDate.getDate()-firstDay.getDay());const endDate=new Date(lastDay);endDate.setDate(endDate.getDate()+(6-lastDay.getDay()));periodElement.textContent=firstDay.toLocaleDateString("en-US",{month:"long",year:"numeric"});grid.style.gridTemplateColumns="repeat(7, 1fr)";grid.innerHTML="";const weekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];weekdays.forEach(day=>{const dayHeader=document.createElement("div");dayHeader.style.background="var(--primary)";dayHeader.style.color="white";dayHeader.style.padding="1rem";dayHeader.style.fontWeight="600";dayHeader.style.textAlign="center";dayHeader.textContent=day;grid.appendChild(dayHeader)});const currentDate=new Date(startDate);while(currentDate<=endDate){const cellDate=new Date(currentDate);const cell=this.createCalendarCell(cellDate,month);grid.appendChild(cell);currentDate.setDate(currentDate.getDate()+1)}}createCalendarCell(date,currentMonth){const cell=document.createElement("div");cell.className="calendar-cell";const today=new Date;if(date.toDateString()===today.toDateString()){cell.classList.add("today")}if(date.getMonth()!==currentMonth){cell.classList.add("other-month")}const dayNumber=document.createElement("div");dayNumber.className="day-number";dayNumber.textContent=date.getDate();cell.appendChild(dayNumber);const dayEvents=this.getEventsForDate(date);dayEvents.forEach(event=>{const eventElement=document.createElement("div");eventElement.className="event-item";eventElement.style.borderLeftColor=event.colorCode;eventElement.textContent=event.title;eventElement.onclick=()=>this.showEventModal(event.id);cell.appendChild(eventElement)});cell.addEventListener("dblclick",()=>{this.quickAddEventForDate(date)});return cell}getEventsForDate(date){const dateStr=date.toDateString();return this.events.filter(event=>{const eventStart=new Date(event.startTime);if(eventStart.toDateString()===dateStr)return true;if(event.isRecurring){return this.eventOccursOnDate(event,date)}return false}).filter(event=>{if(this.filterTags.length===0)return true;return event.tags.some(tag=>this.filterTags.includes(tag))})}eventOccursOnDate(event,date){const eventStart=new Date(event.startTime);const daysDiff=Math.floor((date-eventStart)/(1e3*60*60*24));if(daysDiff<0)return false;switch(event.recurrenceRule){case"daily":return true;case"weekly":return daysDiff%7===0;case"monthly":return date.getDate()===eventStart.getDate();case"yearly":return date.getDate()===eventStart.getDate()&&date.getMonth()===eventStart.getMonth();default:return false}}renderTagSelectors(){const selector=document.getElementById("tag-selector");const filterSelector=document.getElementById("filter-tags");if(!selector||!filterSelector)return;const tags=Object.keys(tagColors);const renderTags=(container,isFilter=false)=>{container.innerHTML="";tags.forEach(tag=>{const tagElement=document.createElement("div");tagElement.className="tag-item";if(isFilter){tagElement.classList.toggle("selected",this.filterTags.includes(tag));tagElement.onclick=()=>this.toggleFilterTag(tag)}else{tagElement.onclick=()=>tagElement.classList.toggle("selected")}tagElement.style.backgroundColor=tagColors[tag];tagElement.style.color="white";tagElement.textContent=tag;container.appendChild(tagElement)})};renderTags(selector);renderTags(filterSelector,true)}toggleFilterTag(tag){const index=this.filterTags.indexOf(tag);if(index>-1){this.filterTags.splice(index,1)}else{this.filterTags.push(tag)}this.renderTagSelectors();this.renderCalendar()}showEventModal(eventId){const event=this.events.find(e=>e.id===eventId);if(!event)return;this.selectedEventId=eventId;const modal=document.getElementById("event-modal");const title=document.getElementById("modal-title");const body=document.getElementById("modal-body");title.textContent=event.title;const startTime=new Date(event.startTime);const endTime=new Date(event.endTime);body.innerHTML=`<p><strong>Description:</strong> ${event.description||"No description"}</p><p><strong>Start:</strong> ${startTime.toLocaleString()}</p><p><strong>End:</strong> ${endTime.toLocaleString()}</p><p><strong>Type:</strong> ${event.isRecurring?"Recurring ("+event.recurrenceRule+")":"One-time"}</p><p><strong>Tags:</strong> ${event.tags.join(", ")||"None"}</p>`;modal.classList.add("active")}closeModal(){document.getElementById("event-modal").classList.remove("active");this.selectedEventId=null}deleteEvent(){if(!this.selectedEventId)return;if(confirm("Are you sure you want to delete this event?")){this.events=this.events.filter(e=>e.id!==this.selectedEventId);this.saveData();this.renderCalendar();this.renderEventsList();this.closeModal();this.showMessage("Event deleted","info")}}toggleCommandPalette(){const palette=document.getElementById("command-palette");const input=document.getElementById("command-input");if(palette.classList.contains("active")){palette.classList.remove("active");this.commandPaletteActive=false}else{palette.classList.add("active");this.commandPaletteActive=true;input.focus();input.value=""}}handleCommandInput(query){const results=document.getElementById("command-results");if(!query.trim()){results.innerHTML="<div class=\"command-item\">Type to search events, add quick events, or jump to dates...</div>";return}const searchResults=this.searchEvents(query);const quickActions=this.getQuickActions(query);const allResults=[...quickActions,...searchResults];results.innerHTML=allResults.map((result,index)=>`<div class="command-item${index===0?" selected":""}" onclick="${result.action}">${result.icon} ${result.text}</div>`).join("")}searchEvents(query){return this.events.filter(event=>event.title.toLowerCase().includes(query.toLowerCase())||event.description.toLowerCase().includes(query.toLowerCase())).map(event=>({icon:"<i class=\"fas fa-calendar\"></i>",text:`${event.title} - ${new Date(event.startTime).toLocaleDateString()}`,action:`eventManager.showEventModal('${event.id}'); eventManager.toggleCommandPalette()`}))}getQuickActions(query){const actions=[];if(query.startsWith("add ")||query.startsWith("+")){actions.push({icon:"<i class=\"fas fa-plus\"></i>",text:`Quick add: "${query.replace(/^(add |\+)/,"")}"`,action:`eventManager.quickAddFromCommand('${query.replace(/^(add |\+)/,"")}'); eventManager.toggleCommandPalette()`})}if(/\d{1,2}\/\d{1,2}/.test(query)){actions.push({icon:"<i class=\"fas fa-calendar-day\"></i>",text:`Jump to ${query}`,action:`eventManager.jumpToDate('${query}'); eventManager.toggleCommandPalette()`})}return actions}quickAddFromCommand(title){const now=new Date;const start=new Date(now.getTime()+60*60*1e3);const end=new Date(start.getTime()+60*60*1e3);const newEvent={id:this.generateId(),title:title.trim(),description:"",startTime:start.toISOString(),endTime:end.toISOString(),isRecurring:false,recurrenceRule:"",tags:[],colorCode:"#64748B",createdAt:new Date().toISOString()};this.events.push(newEvent);this.saveData();this.renderCalendar();this.renderEventsList();this.showMessage(`Quick event "${title}" added!`,"success")}addTodo(){const title=document.getElementById("todo-title").value.trim();const due=document.getElementById("todo-due").value;const linkedEvent=document.getElementById("todo-event").value;const priority=document.getElementById("todo-priority").value;if(!title){this.showMessage("Please enter a task title","error");return}const newTodo={id:this.generateId(),title,due:due?new Date(due).toISOString():null,linkedEvent:linkedEvent||null,priority,completed:false,createdAt:new Date().toISOString()};this.todos.push(newTodo);this.saveData();this.renderTodoList();document.getElementById("todo-title").value="";document.getElementById("todo-due").value="";document.getElementById("todo-event").value="";this.showMessage("Task added successfully!","success")}renderTodoList(){const container=document.getElementById("todo-list");if(!container)return;if(this.todos.length===0){container.innerHTML="<div class=\"card\"><p>No tasks yet. Add some tasks to get started!</p></div>";return}const todosByPriority={high:[],medium:[],low:[]};this.todos.forEach(todo=>todosByPriority[todo.priority].push(todo));container.innerHTML=Object.entries(todosByPriority).map(([priority,todos])=>{if(todos.length===0)return"";return`<div class="card"><h3>${priority.charAt(0).toUpperCase()+priority.slice(1)} Priority</h3>${todos.map(todo=>`<div class="todo-item" style="display:flex;align-items:center;gap:1rem;padding:1rem;background:var(--background);border-radius:0.5rem;margin-bottom:0.5rem"><input type="checkbox" ${todo.completed?"checked":""} onchange="eventManager.toggleTodo('${todo.id}')" style="transform:scale(1.2)"><div style="flex:1"><div style="font-weight:500;${todo.completed?"text-decoration:line-through;opacity:0.6":""}">${todo.title}</div>${todo.due?`<div style="font-size:0.9rem;color:var(--text-secondary)">Due: ${new Date(todo.due).toLocaleDateString()}</div>`:""}${todo.linkedEvent?`<div style="font-size:0.9rem;color:var(--primary)">📅 Linked to event</div>`:""}</div><button class="btn" style="padding:0.25rem 0.5rem;font-size:0.8rem;background:#EF4444" onclick="eventManager.deleteTodo('${todo.id}')"><i class="fas fa-trash"></i></button></div>`).join("")}</div>`}).join("")}toggleTodo(todoId){const todo=this.todos.find(t=>t.id===todoId);if(todo){todo.completed=!todo.completed;this.saveData();this.renderTodoList()}}deleteTodo(todoId){if(confirm("Delete this task?")){this.todos=this.todos.filter(t=>t.id!==todoId);this.saveData();this.renderTodoList();this.showMessage("Task deleted","info")}}createTrip(){const title=document.getElementById("trip-title").value.trim();const destination=document.getElementById("trip-destination").value.trim();const startDate=document.getElementById("trip-start").value;const endDate=document.getElementById("trip-end").value;if(!title||!destination||!startDate||!endDate){this.showMessage("Please fill in all trip details","error");return}const tripId=this.generateId();const newTrip={id:tripId,title,destination,startDate,endDate,checklist:[{item:"Pack clothes",done:false},{item:"Book accommodations",done:false},{item:"Check passport/ID",done:false},{item:"Arrange transportation",done:false},{item:"Notify bank of travel",done:false}],createdAt:new Date().toISOString()};this.trips.push(newTrip);const tripEvent={id:this.generateId(),title:`✈️ ${title}`,description:`Trip to ${destination}`,startTime:new Date(startDate+"T00:00").toISOString(),endTime:new Date(endDate+"T23:59").toISOString(),isRecurring:false,recurrenceRule:"",tags:["Trips"],colorCode:tagColors.Trips,createdAt:new Date().toISOString()};this.events.push(tripEvent);this.saveData();this.renderTripsList();this.renderCalendar();this.renderEventsList();document.getElementById("trip-title").value="";document.getElementById("trip-destination").value="";document.getElementById("trip-start").value="";document.getElementById("trip-end").value="";this.showMessage("Trip created and added to calendar!","success")}renderTripsList(){const container=document.getElementById("trips-list");if(!container)return;if(this.trips.length===0){container.innerHTML="<div class=\"card\"><p>No trips planned yet. Create your first trip!</p></div>";return}container.innerHTML=this.trips.map(trip=>`<div class="card"><h3>✈️ ${trip.title}</h3><p><strong>Destination:</strong> ${trip.destination}</p><p><strong>Dates:</strong> ${new Date(trip.startDate).toLocaleDateString()} - ${new Date(trip.endDate).toLocaleDateString()}</p><h4>Packing Checklist:</h4>${trip.checklist.map((item,index)=>`<div style="display:flex;align-items:center;gap:0.5rem;margin:0.5rem 0"><input type="checkbox" ${item.done?"checked":""} onchange="eventManager.toggleTripItem('${trip.id}',${index})"><span style="${item.done?"text-decoration:line-through;opacity:0.6":""}">${item.item}</span></div>`).join("")}<div style="margin-top:1rem"><button class="btn btn-secondary" onclick="eventManager.deleteTrip('${trip.id}')"><i class="fas fa-trash"></i> Delete Trip</button></div></div>`).join("")}toggleTripItem(tripId,itemIndex){const trip=this.trips.find(t=>t.id===tripId);if(trip){trip.checklist[itemIndex].done=!trip.checklist[itemIndex].done;this.saveData();this.renderTripsList()}}deleteTrip(tripId){if(confirm("Delete this trip and its calendar event?")){this.trips=this.trips.filter(t=>t.id!==tripId);this.events=this.events.filter(e=>!e.title.includes("✈️"));this.saveData();this.renderTripsList();this.renderCalendar();this.renderEventsList();this.showMessage("Trip deleted","info")}}updateTodoEventOptions(){const select=document.getElementById("todo-event");if(!select)return;select.innerHTML="<option value=\"\">No linked event</option>"+this.events.map(event=>`<option value="${event.id}">${event.title} - ${new Date(event.startTime).toLocaleDateString()}</option>`).join("")}renderEventsList(){const container=document.getElementById("events-list");if(!container)return;if(this.events.length===0){container.innerHTML="<div class=\"card\"><p>No events scheduled yet. Create your first event!</p></div>";return}const upcomingEvents=this.events.filter(event=>new Date(event.startTime)>=new Date).sort((a,b)=>new Date(a.startTime)-new Date(b.startTime));container.innerHTML=upcomingEvents.map(event=>`<div class="card" onclick="eventManager.showEventModal('${event.id}')" style="cursor:pointer;transition:all 0.3s ease" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'"><h3 style="color:${event.colorCode}">${event.title}</h3><p>${event.description||"No description"}</p><div style="display:flex;gap:1rem;margin:1rem 0;font-size:0.9rem;color:var(--text-secondary)"><span><i class="fas fa-clock"></i> ${new Date(event.startTime).toLocaleString()}</span>${event.isRecurring?`<span><i class="fas fa-redo"></i> ${event.recurrenceRule}</span>`:""}</div><div style="display:flex;gap:0.5rem">${event.tags.map(tag=>`<span style="background:${tagColors[tag]||"#64748B"};color:white;padding:0.25rem 0.5rem;border-radius:1rem;font-size:0.8rem">${tag}</span>`).join("")}</div></div>`).join("")}changeView(view){this.currentView=view;document.querySelectorAll(".view-btn").forEach(btn=>btn.classList.remove("active"));document.querySelector(`[data-view="${view}"]`).classList.add("active");this.renderCalendar()}previousPeriod(){if(this.currentView==="month"){this.currentDate.setMonth(this.currentDate.getMonth()-1)}else if(this.currentView==="week"){this.currentDate.setDate(this.currentDate.getDate()-7)}else{this.currentDate.setDate(this.currentDate.getDate()-1)}this.renderCalendar()}nextPeriod(){if(this.currentView==="month"){this.currentDate.setMonth(this.currentDate.getMonth()+1)}else if(this.currentView==="week"){this.currentDate.setDate(this.currentDate.getDate()+7)}else{this.currentDate.setDate(this.currentDate.getDate()+1)}this.renderCalendar()}goToToday(){this.currentDate=new Date;this.renderCalendar()}quickAddEvent(){const title=prompt("Event title:");if(title){this.quickAddFromCommand(title)}}showMessage(message,type="info"){const toast=document.createElement("div");toast.className="toast";const colors={success:"#10B981",error:"#EF4444",warning:"#F59E0B",info:"#06B6D4"};toast.style.background=colors[type]||colors.info;toast.textContent=message;document.body.appendChild(toast);setTimeout(()=>{toast.style.animation="slideOut 0.3s ease";setTimeout(()=>toast.remove(),300)},3e3)}}function showTab(event,tabName){if(event)event.preventDefault();document.querySelectorAll(".tab-content").forEach(tab=>tab.classList.remove("active"));document.querySelectorAll(".nav-tab").forEach(tab=>tab.classList.remove("active"));document.getElementById(tabName).classList.add("active");if(event)event.target.classList.add("active")}function toggleRecurrence(){const type=document.getElementById("event-type").value;const options=document.getElementById("recurrence-options");options.style.display=type==="recurring"?"block":"none"}function addEvent(event){eventManager.addEvent(event)}function changeView(view){eventManager.changeView(view)}function previousPeriod(){eventManager.previousPeriod()}function nextPeriod(){eventManager.nextPeriod()}function goToToday(){eventManager.goToToday()}function toggleCommandPalette(){eventManager.toggleCommandPalette()}function quickAddEvent(){eventManager.quickAddEvent()}function addTodo(){eventManager.addTodo()}function createTrip(){eventManager.createTrip()}function editEvent(){console.log("Edit functionality coming soon")}function deleteEvent(){eventManager.deleteEvent()}function closeModal(){eventManager.closeModal()}const eventManager=new EventManager</script></body></html>
